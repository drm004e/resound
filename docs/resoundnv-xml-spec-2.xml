<!--
Address space for targetting parameters defined in this XML file, e.g.
	/xml/id/
	/xml/mono-circle/output/1/gain

Address space for responding to generic incoming controllers
	/any/other/address

specified inside behaviour <param> tag
-->

<resoundxml>

    <!-- Fundamental objects (creates or modifies), delete -->
	<audiostream id="ob01"></audiostream>	<!-- create if ID doesn't already exist -->
	<audiostream id="ob01"></audiostream>	<!-- modify if ID does already exist-->
	<delete id="ob01"/>			<!-- delete item with corresponding ID -->

    <!-- preset defines a named block of XML that can be executed on demand -->
	<preset id="pr01"></preset>

    <!-- Audio stream -->
	<audiostream id="fch1" class="file" path="/home/njm79/media/str1.wav" channel="1" gain="1.2"/>
	<audiostream id="fch2" class="file" path="/home/njm79/media/str1.wav" channel="2"/>
	<audiostream id="fch3" class="file" path="/home/njm79/media/str1.wav" channel="3"/>
	<audiostream id="fch4" class="file" path="/home/njm79/media/str1.wav" channel="4"/>
	<audiostream id="fch5" class="file" path="/home/njm79/media/str1.wav" channel="5"/>
	<audiostream id="fch6" class="file" path="/home/njm79/media/str1.wav" channel="6"/>

	<audiostream id="live1" class="live" port="in1"/>		<!-- JACK connections -->
	<audiostream id="live2" class="live" port="in2" gain="0.2"/>	

    <!-- Loudspeaker -->
	<loudspeaker id="sp01" port="out1" x="" y="" z="" az="" el="" gain="1.0"/>
	<loudspeaker id="sp02" port="out2" x="" y="" z="" az="" el="" gain="1.0"/>
	<loudspeaker id="sp03" port="out3" x="" y="" z="" az="" el="" gain="1.0"/>
	<loudspeaker id="sp04" port="out4" x="" y="" z="" az="" el="" gain="1.0"/>
	<loudspeaker id="sp05" port="out5" x="" y="" z="" az="" el="" gain="1.0"/>

	<loudspeaker id="subs" port="out8" isArray="true" gain="0.3333">		<!-- Multiple speakers, one output channel -->
		<element id="1" x="" y="" z="" az="" el=""/>
		<element id="2" x="" y="" z="" az="" el=""/>
		<element id="3" x="" y="" z="" az="" el=""/>
	</loudspeaker>

    <!-- CLS -->
	<cls id="Main5-1">
		<element id="L" speakerid="sp01"/>	<!-- element id is within 'scope' of object -->
		<element id="C" speakerid="sp02"/>
		<element id="R" speakerid="sp03"/>
		<element id="Ls" speakerid="sp04"/>
		<element id="Rs" speakerid="sp05"/>
		<element id="LFE" speakerid="subs" gain="1.1"/>
	</cls>

	<cls id="Main-Stereo-Front">
		<element id="L" speakerid="sp01"/>
		<element id="R" speakerid="sp03"/>
	</cls>

	<cls id="Main-Stereo-Rear">
		<element id="L" speakerid="sp01"/>
		<element id="R" speakerid="sp03"/>
	</cls>

	<cls id="Stereo-East-Pair">
		<element id="L" speakerid="sp04"/>
		<element id="R" speakerid="sp01"/>
	</cls>

    <!-- CASS -->
	<cass id="5.1-tape-mapping">
		<element id="L" streamid="fch1"/>	<!-- see Audio Stream, above -->
		<element id="C" streamid="fch5" gain="1.1"/>
		<element id="R" streamid="fch2"/>
		<element id="Ls" streamid="fch3"/>
		<element id="Rs" streamid="fch4"/>
		<element id="LFE" streamid="fch6"/>
	</cass>

	<cass id="stereo-mic-pair">
		<element id="L" streamid="live1"/>
		<element id="R" streamid="live2"/>
	</cass>

	<cass id="stereo-tape-mapping">
		<element id="L" streamid="fch1"/>
		<element id="R" streamid="fch2"/>
	</cass>

	<preset id="remap-5-1-tape-mapping">			<!-- on demand remap of 5.1 routing -->
		<cass id="5-1-tape-mapping">
			<element id="L" streamid="fch1"/>
			<element id="C" streamid="fch3"/>
			<element id="R" streamid="fch2"/>
			<element id="Ls" streamid="fch5"/>
			<element id="Rs" streamid="fch6"/>
			<element id="LFE" streamid="fch4"/>
		</cass>
	</preset>

    <!-- Behaviour -->
	<behaviour id="behaviour1" class="attenuator">	<!-- One fader, one loudspeaker -->
		<input id="1" ref="stereo-tape-mapping.L"/>
		<output id="2" ref="Main-Stereo-Front.L"/>
		<param id="level" address="/fader/1"/>
	</behaviour>

	<behaviour id="5-1-fader" class="attenuator">	<!-- One fader, 5.1 loudspeakers -->
		<input id="1" ref="5-1-tape-mapping"/>
		<output id="2" ref="Main5-1"/>
		<param id="level" address="/fader/2"/>
	</behaviour>

	<behaviour id="stereo-multi-crossfade" class="multi-crossfade">	<!-- One fader, 5.1 loudspeakers -->
		<input id="1" ref="stereo-mic-pair"/>
		<output id="1" ref="Main-Stereo-Front"/>	<!-- Order of collective == order of XML -->
		<output id="2" ref="Main-Stereo-Rear"/>
		<output id="3" ref="Main-Stereo-Front"/> <!--back to the front pair-->
		<output id="4" ref="Stereo-East-Pair"/>
		<param id="level" address="/fader/3"/>
		<param id="position" address="/fader/4"/>
	</behaviour>

	<behaviour id="mono-circle" class="chase">
		<input id="1" ref="live2"/>
		<output id="1" ref="sp01" gain="0.4" any-old-attribute="whatever"/>	<!-- attributes interpreted (or ignored) as appropriate by target behaviour algorithm -->
		<output id="2" ref="sp02"/>
		<output id="3" ref="sp03"/>
		<output id="4" ref="sp04"/>
		<output id="5" ref="sp05"/>
		<param id="amp" address="/joyleft1" value="1.1"/> <!-- value specifies default value-->
		<param id="freq" address="/joyright1" value="1.1"/>
		<param id="phase" value="1.0"/> <!--This one has no osc control assigned-->
	</behaviour>

	<preset id="other-control">
		<behaviour id="mono-circle" class="chase">
			<param id="phase" value="1.0" address="/joyright5"/> <!-- preset to remap control-->
		</behaviour>
	</preset>

</resoundxml>
